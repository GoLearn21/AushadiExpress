################################  ITERATION 0 â€” FOUNDATION  ################################
You are **Replit AI**, an autonomous full-stack code-generation agent.

Mission
â”€â”€â”€â”€â”€â”€â”€
Lay the concrete foundation for **â€œPharma-Empire OSâ€**â€”an offline-first pharmacy
POS + compliance platform that will later grow into a network marketplace and
on-device AI assistant.

Core objectives for this iteration
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. **Local-first data layer (WatermelonDB â‡† SQLite)**
2. **Generic outbox + background sync worker (user-invisible)**
3. **AI hooks** (stubbed) for future on-device LLM, voice, OCR
4. **Replit plumbing** + smoke-test splash
5. **Concise docs** for UX vision & offline strategy

Deliverables (generate *only* these files)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“œ **setup.sh**  
  â€¢ `set -e`; `chmod +x` itself  
  â€¢ Installs Node & Python deps, Expo SDK 51  
  â€¢ Creates `backend/db/pharma.db` and executes:

```sql
PRAGMA foreign_keys=ON;
CREATE TABLE IF NOT EXISTS products(id TEXT PRIMARY KEY,name TEXT);
CREATE TABLE IF NOT EXISTS stock(id TEXT PRIMARY KEY,product_id TEXT,batch TEXT,
  expiry TEXT,qty INT,FOREIGN KEY(product_id) REFERENCES products(id));
CREATE TABLE IF NOT EXISTS sales(id TEXT PRIMARY KEY,date TEXT,total REAL);
CREATE TABLE IF NOT EXISTS outbox(id INTEGER PRIMARY KEY AUTOINCREMENT,
  tbl TEXT,row_id TEXT,op TEXT,payload TEXT,
  ts DATETIME DEFAULT CURRENT_TIMESTAMP,
  synced INT DEFAULT 0,
  embedding BLOB NULL);
â€¢ Prints a big ASCII banner with next commands.

ğŸ“ mobile/ (Expo + TypeScript)
â€¢ App.tsx â€” splash â€œLocal-first ready ğŸš€â€ + â€œAdd Demo Productâ€ button
â€¢ src/db/index.ts â€” WatermelonDB init (SQLite adapter)
â€¢ src/sync/syncWorker.ts â€” polls outbox, POSTs to /api/sync/batch,
marks rows synced = 1; uses @react-native-community/netinfo; 30 s interval
â€¢ src/ai/assistant.ts â€” interface ask(text, ctx), implementations
stubLocal() & remoteOpenAI()
â€¢ src/ai/voice.ts, src/ai/ocr.ts â€” empty stubs exporting TODOs
â€¢ __tests__/syncWorker.test.ts â€” Jest: insert fake outbox row â†’ simulate
offline â†’ online â†’ expect flush

ğŸ“ backend/
â€¢ main.py â€” FastAPI + TinyCouch; /sync/batch idempotently applies outbox events
â€¢ db/schema.sql â€” same schema as above

ğŸ“ docs/
â€¢ ux/requirements.md â€” two short sections: POS Checkout & Inventory (+ 15-sec rule)
â€¢ tech/offline_strategy.md â€” explain outbox, eventual consistency, conflict-ID plan
â€¢ roadmap.md â€” Iterations 1 â†’ 5 one-liner headlines
â€¢ ux/research.md â€” table of three Indian pharmacy POS apps with URL/screenshot & takeaway

âš™ï¸ .replit

ini
Copy code
run = "bash setup.sh && npx expo start --tunnel"
âš™ï¸ replit.nix â€” nodejs 18, python 3.12, expo-cli, uvicorn

ğŸ“„ app.json â€” add "extra": {"LLM_DOWNLOAD_URL": ""} and set android.maxSdkVersion = 34

Constraints
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Generate no other files or codeâ€”POS logic lands in Iteration 1.

All commands non-interactive; final APK < 90 MB.

Dependencies:
â€“ node 18.x, expo â€œ~51.0.8â€, react 18.2.0, react-native 0.74.1
â€“ WatermelonDB 0.27.1, @nozbe/sqlite 1.7.2
â€“ fastapi ^0.111, uvicorn ^0.30, tinycouch latest

Each markdown doc â‰¤ 120 lines.

Smoke test
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
setup.sh must finish; npm test must pass; Expo tunnel must display the splash.

Begin.
##########################################################################################